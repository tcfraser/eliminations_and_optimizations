\documentclass[10pt]{article}
\usepackage[utf8]{inputenc} % utf8 support

% === Document Layout ===
\usepackage[hmargin=1in,vmargin=1in]{geometry}
\usepackage{indentfirst}
\usepackage{lipsum}
\usepackage{url}
\usepackage[colorlinks,linkcolor=red!50!black,citecolor=blue!50!black,urlcolor=blue!50!black]{hyperref}
\usepackage{amsmath}
\usepackage{pdfpages}
\usepackage{physics}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{mathtools} % for the coloneq command
\usepackage{xparse}
\usepackage{ifthen} % For checking optional parameters
\usepackage{enumerate}
\usepackage{mathrsfs} % For \mathscr font
\usepackage{amsthm} % The AMS theorems package
\usepackage{amsthm}
\usepackage{tabularx}
\usepackage{authblk} % For affiliations

% Multiple footnotes https://tex.stackexchange.com/questions/40072/incompatibility-between-footmisc-option-multiple-and-hyperref/62091#62091
\let\oldFootnote\footnote
\newcommand\nextToken\relax

\renewcommand\footnote[1]{%
    \oldFootnote{#1}\futurelet\nextToken\isFootnote}

\newcommand\isFootnote{%
    \ifx\footnote\nextToken\textsuperscript{,}\fi}

% amsthm
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\theoremstyle{remark}
\newtheorem*{remark}{Remark}

\usepackage{amsfonts}
\usepackage{indentfirst}
\usepackage{pgfplots}
\usepackage{tikz}
\usetikzlibrary{
    calc,
    arrows,
    shapes.geometric,
    intersections,
    pgfplots.fillbetween,
    decorations.pathreplacing,
    decorations.markings,
    patterns,
    cd % For commutative diagrams
}
\tikzset{every picture/.style={baseline={([yshift=-0.3em]current bounding box.center)}}}
\tikzset{
    % style to apply some styles to each segment of a path
    on each segment/.style={
        decorate,
        decoration={
            show path construction,
            moveto code={},
            lineto code={
                \path [#1]
                (\tikzinputsegmentfirst) -- (\tikzinputsegmentlast);
            },
            curveto code={
                \path [#1] (\tikzinputsegmentfirst)
                .. controls
                (\tikzinputsegmentsupporta) and (\tikzinputsegmentsupportb)
                ..
                (\tikzinputsegmentlast);
            },
            closepath code={
                \path [#1]
                (\tikzinputsegmentfirst) -- (\tikzinputsegmentlast);
            },
        },
    },
    % style to add short perpendicular bar midway along a path
    bar/.style={
        postaction={
            decorate,
            decoration={
                markings,
                mark=at position .5 with {\arrow{|}}
            }
        }
    }
}

\DeclareMathOperator{\id}{id}
\newcommand{\opcat}{\mathrm{op}}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\cod}{cod}
\DeclareMathOperator{\dom}{dom}
\newcommand{\poly}{\mathsf{Poly}} % category of polyhedra and maps between them
\newcommand{\set}{\mathsf{Set}} % category of sets and functions between them
\newcommand{\cat}{\mathsf{Cat}} % 2-category of categories and functors between them and natural transformations between the functors
\newcommand{\sub}{\mathsf{Sub}} % the poset of subobjects and inclusions between them 
\newcommand{\pow}{\mathsf{P}} % the powerset poset

\newcommand{\catA}{\mathcal{A}}
\newcommand{\catB}{\mathcal{B}}
\newcommand{\catC}{\mathcal{C}}
\newcommand{\catD}{\mathcal{D}}
\newcommand{\catE}{\mathcal{E}}

\newcommand{\Pf}{P}

% === Bibliography ===
\usepackage[
    backend=biber,
    style=alphabetic,
]{biblatex}
\addbibresource{references.bib}

\author[1,2]{Thomas C. Fraser}
\author[1]{Tobias Fritz}
\affil[1]{\textit{Perimeter Institute for Theoretical Physics, Waterloo, Ontario, Canada, N2L 2Y5}}
\affil[2]{\textit{Dept. of Physics and Astronomy, University of Waterloo, Waterloo, Ontario, Canada, N2L 3G1}}
\date{\today}
\title{On the Fibrations Underlying Optimization and Elimination}
\begin{document}

\maketitle
\begin{abstract}
    \textit{As of July 25, 2019:} The theory of fibrations and fibered categories appears to be a natural place to discuss the theory of various optimization and elimination problems, including resolution in logic, linear and non-linear quantifier elimination, polytope projection, lattice optimization over various spaces, etc. These notes aim to investigate that claim and furthermore attempts to determine any and all structural similarities between the various cases.
\end{abstract}
\tableofcontents

\clearpage
\section{Potentially Relevant Examples}

\subsection{The Subobject Fibration}

Given any category $\catB$, and an object $X$ of $\catB$, a \textit{subobject} of $X$ is an isomorphism class of monomorphisms $f : Y \hookrightarrow X$; two monomorphisms $f : Y \hookrightarrow X, g : Z \hookrightarrow
X$ with shared codomain $X$ are isomorphic if there exists an isomorphism $h : Y \xrightarrow{\sim} Z$ such that $f = g \circ h$. The individual monomorphisms of a subobject class can be equipped with a preorder relation $( f : Y \hookrightarrow Z ) \leq ( g : Z \hookrightarrow X )$ if there exists $k : Y \rightarrow Z$ such that $f = g \circ k$:
\begin{equation}
    \begin{tikzcd}[column sep=small]
        Y \ar[rd, hook, "f"'] \ar[rr, "k"] &   & Z \ar[ld, hook', "g"]\\
          & X & 
    \end{tikzcd}
\end{equation}
Note that if such a $k : Y \to Z$ exists, then it is unique because it $g$ is a monomorpism; if $k' : Y \rightarrow Z$ satisfied $f = g \circ k'$ as well, then $g \circ k = g \circ k'$ which implies $k = k'$. Moreover, this preorder relation on the individual monomorphisms extends to a poset $\sub_{\catB}(X)$ between the subobjects. For example, if $\catB$ is the category $\set$, the subobjects of $X$ are subsets of $X$ and thus $\sub_{\set}(X) \cong \pow(X)$. Even more concretely, if $X$ is the set $\mathbb{R}^2$, an exemplary diagram of $\sub_{\set}(\mathbb{R}^2)$ is
\begin{center}
    \begin{tikzcd}[column sep=small]
        & A & \\
        B \ar[ur, hook', "\subseteq"] & & C \ar[ul, hook, "\subseteq"'] \\
        & D \ar[ul, hook', "\subseteq"] \ar[ur, hook, "\subseteq"'] \ar[uu, hook, "\subseteq"] & \\
    \end{tikzcd}
    \hspace{3em}
    \begin{tikzpicture}[
            set border/.style={draw=#1!80!black},
            set region/.style={set border=#1, fill=#1!50!white, fill opacity=0.2},
            set label/.style={draw=#1!80!black}
        ]
        \draw[thick, set region=blue, rounded corners] (-2,-1.4) rectangle (+2, +1.4) {};

        \begin{scope}[shift={(-0.5,0)}] 
            \coordinate (y1) at (  +0:1.3);
            \coordinate (y2) at ( +45:1.1);
            \coordinate (y3) at ( +90:0.6);
            \coordinate (y4) at (+135:1.1);
            \coordinate (y5) at (+180:1.3);
            \coordinate (y6) at (+270:1.1);
            \draw [thick, set region=red] plot [smooth cycle, tension=0.8] coordinates {(y1) (y2) (y3) (y4) (y5) (y6)};
        \end{scope}
        \begin{scope}[shift={(+0.5,0)}] 
            \coordinate (z1) at ( +45:1.3);
            \coordinate (z2) at (+135:1.3);
            \coordinate (z3) at (+225:1.3);
            \coordinate (z4) at (+270:1.1);
            \coordinate (z5) at (+315:0.7);
            \coordinate (z6) at (+360:1.3);
            \draw [thick, set region=green] plot [smooth cycle, tension=0.9] coordinates {(z1) (z2) (z3) (z4) (z5) (z6)};
        \end{scope}
        \draw [thick, set border=red] plot [smooth cycle, tension=0.8] coordinates {(y1) (y2) (y3) (y4) (y5) (y6)};
        \coordinate (w1) at (  +0:0.5);
        \coordinate (w2) at ( +90:0.5);
        \coordinate (w3) at (+180:0.5);
        \coordinate (w4) at (+270:0.5);
        \draw [thick, set region=yellow] plot [smooth cycle, tension=0.6] coordinates {(w1) (w2) (w3) (w4)};

        \node at (+0,+0) {\color{yellow!50!black}$D$};
        \node at (+1.3,+0.5) {\color{green!60!black}$C$};
        \node at (-1.3,+0) {\color{red!60!black}$B$};
        \node at (+1.5,-0.9) {\color{blue!30!black}$A$};
    \end{tikzpicture}
\end{center}
If the category $\catB$ has pullbacks, the posetal categories $\sub_{\catB}(X)$ for varying objects $X$ of $\catB$ can be ``stitched together'' to form an enveloping category denoted $\sub(\catB)$. The objects of $\sub(\catB)$ are the objects of $\sub_{\catB}(X)$ for various $X$. The morphisms of $\sub(\catB)$ are defined using the morphisms of $\catB$. Given a equivalence class of monomorphisms $B = \{b_i : Z_i \hookrightarrow X \}_{i \in \mathcal I} \in \sub_{\catB}(X)$ with with shared codomain $X$, and morphism $f : Y \to X$ (not necessarily a monomorphism) with codmain $X$, the pullbacks $f^\ast b_i$ of $b_i$ along $f$ for each $i \in \mathcal I$ constitute an equivalence class of monomorphisms $f^{\ast}B \coloneqq \{f^{\ast} b_i : Y \times_{X} Z_i \hookrightarrow Y \}_{i \in \mathcal I} \in \sub_{\catB}(Y)$:\footnote{Evidently, this relies on the fact that pullbacks perserve monomorphisms; i.e. $b : Z \hookrightarrow X$ is a monomorphism, then the pullback $f^\ast b : Y \times_{X} Z \hookrightarrow Y$ is also.}\footnote{The isomoprhisms connecting the monomorphisms of $f^\ast B$ are also given by pullback of the isomorphisms connecting the monomorphisms of $B$.}
\begin{equation}
    \begin{tikzcd}
        Y \times_{X} Z_i \ar[dr, phantom, "\lrcorner", very near start, xshift=-2mm] \ar[r, "b_i^\ast f"] \ar[d, hook, "f^\ast b_i"'] & Z_i \ar[d, hook, "b_i"] \\
        Y \ar[r, "f"] & X
    \end{tikzcd}
\end{equation}
To every morphism $f : Y \to X$ of $\catB$, and object $B \in \sub_{\catB}(X)$, denote $\kappa_{f}(B) : f^\ast B \to B$ where $f^\ast B \in \sub_{\catB}(Y)$. Finally, a morphism of $\sub(\catB)$ between $A \in \sub_\catB(Y)$ and $B \in \sub_\catB(X)$ is the formal sequence \begin{tikzcd}[cramped] A \ar[r, "\leq"] &  f^{\ast}(B) \ar[r, "\kappa_f(B)"] & B \end{tikzcd}. The projection functor $P_{\catB} : \sub(\catB) \to \catB$ defines the \textit{subobject fibration}\footnote{Note that while the fibres $\sub_{\catB}(X)$ are thin, the total category $\sub(\catB)$ is not necessarily thin.}.

\textcolor{red!50!black}{[TODO: figure out the relationship between a subobject fibration and the codomain fibration via the notion of \href{https://math.stackexchange.com/questions/2171645/how-can-the-subobject-fibration-be-obtained-from-the-codomain-fibration/2173108}{subterminal objects}.]}

\subsection{The category of convex polyhedra and affine maps}

One of the primary motiviating examples for this project is the theory of \textit{convex polyhedra} and associated maps which implement their projections. Following \citeauthor{boyd2004convex}~\cite{boyd2004convex}, a \textit{polyhedron}\footnote{The term polytope will be reserved for the context of \textit{bounded polyhedron}. Note that the opposite convention is sometimes used by other authors as pointed out by \cite{boyd2004convex}.}\footnote{Alternative and sometimes inequivalent definitions for ``polyhedra'' do exist; oftentimes, these alternative definitions accomodate more general notions of polyhedra, such as non-convex polyhedra. Understanding the relationship between these various definitions, and the proposal of new ones, is a mathematical endeavour which dates back to antiquity and continues today  \cite{grunbaum2003your, lakatos2015proofs}.} $P$ is the intersection of a finite number of halfspaces of some ambient vector space $V$. Equivalently, taking $n = \dim V$, $P$ can be regarded as the solution space of a finite system of $m$ linear inequalities constraining $n$ variables $x = (x_1, x_2, \ldots, x_n)$:
\begin{align*}
    a_{1,1} x_1 + a_{1,2} x_2 + \ldots + a_{1,n} x_n &\geq b_1, \\
    a_{2,1} x_1 + a_{2,2} x_2 + \ldots + a_{2,n} x_n &\geq b_2, \\
                                                     &\vdots  , \\
    a_{m,1} x_1 + a_{m,2} x_2 + \ldots + a_{m,n} x_n &\geq b_m.
\end{align*}
Written compactly,
\begin{equation}
    P = \{ x \in V \mid A x \succeq b \}
\end{equation} 
where the coefficients $a_{i,j}$ form a $m \times n$ matrix $A$ and the constants $b_{i}$ form a vector $b$.

\begin{definition}
    The category $\poly$ consists of polyhedra as objects and affine maps between them.
\end{definition}
\begin{center}
\newcommand{\importpolyproj}[1]{
\begin{tikzpicture}[
        scale=0.6,
        line join=round,
        poly_vertex/.style = {circle,fill,blue,inner sep=0.75pt},
        poly_edge/.style = {thick, blue},
        poly_face/.style = {blue, opacity=0.15}
    ]
    \coordinate (O) at (0,0,0);
    \coordinate (x1) at (5,0,0);
    \coordinate (x2) at (0,5,0);
    \coordinate (x3) at (0,0,5);
    \draw[thick, ->] (O) -- (x1) node[right]{$x$};
    \draw[thick, ->] (O) -- (x2) node[above]{$y$};
    \draw[thick, ->] (O) -- (x3) node[left]{$z$};
    #1
\end{tikzpicture}
}
\importpolyproj{\input{figures/polytope_projection/dodecahedron_projection.tex}}
\importpolyproj{\input{figures/polytope_projection/octahedron_projection.tex}}
\importpolyproj{\input{figures/polytope_projection/tetrahedron_projection.tex}}
% \importpolyproj{\input{figures/polytope_projection/metabidiminishedRhombicosidodecahedron_projection.tex}}
% \importpolyproj{\input{figures/polytope_projection/rhombicTriacontahedron_projection.tex}}
\end{center}

\begin{equation}
\begin{tikzcd}[column sep=0.5em]
    & \poly_{Y} \ar[dd, "\pi_{1,!}", near end] & & \poly_{X\otimes Y} \ar[dd,"\pi_{X,!}"'] \ar[ll,"\pi_{Y,!}"] \\
    \poly_{Y\otimes Z} \ar[dd,"\pi_{Z,!}"] \ar[ur,"\pi_{Y,!}"'{sloped,auto}] & & \poly_{X\otimes Y\otimes Z} \ar[ll,"\pi_{Y\otimes Z,!}"', crossing over, near start] \ar[ur,"\pi_{X\otimes Y,!}"{sloped,auto}] & \\
    & \poly_{1} \ar[from=rr, "\pi_{1,!}"', near end] \ar[from=dl, "\pi_{1,!}"{sloped,auto}] & & \poly_{X} \\
    \poly_{Z} & & \poly_{X\otimes Z} \ar[ll,"\pi_{Z,!}"'] \ar[ur,"\pi_{X,!}"{sloped,auto}] \ar[from=uu,"\pi_{X\otimes Z,!}", crossing over, near start] & \\
\end{tikzcd}
\end{equation}

\begin{center}
\begin{tikzpicture}[
        extend line/.style={dashed, shorten >= -0.5cm,shorten <= -0.5cm},
        set region/.style={pattern=north east lines, pattern color=red},
        set label/.style={rounded corners=1mm, inner sep=1mm, fill=white, fill opacity=0.95}
    ]
    \coordinate (ori) at (-3,-3);
    \coordinate (A) at ($(ori)+(+7,0)$);
    \coordinate (B) at ($(ori)+(0,+6)$);
    \draw[thick, ->, shorten <= -0.5cm] (ori) -- (A) node[right]{$A$};
    \draw[thick, ->, shorten <= -0.5cm] (ori) -- (B) node[above]{$B$};

    \coordinate (x1) at ( -90:2);
    \coordinate (x2) at ( +10:2);
    \coordinate (x3) at ( +70:2);
    \coordinate (x4) at (+140:2);
    \coordinate (x5) at (+190:2);
    \foreach \p in {x1,x2,x3,x4,x5} {
        \node at (\p)[circle,fill,inner sep=1pt]{}; 
        \coordinate (\p A) at ($(ori)!(\p)!(A)$);
        \coordinate (\p B) at ($(ori)!(\p)!(B)$);
    }
    \draw [thick, set region] (x1) -- (x2) -- (x3) -- (x4) -- (x5) -- cycle;
    \foreach \p/\q in {x1/x2,x2/x3,x3/x4,x4/x5,x5/x1} {
        \draw [extend line] (\p) -- (\q);
    }
    
    \foreach \p in {x2,x5} {
        \draw [dash dot] (\p) -- (\p A);
        \draw [thick] ([yshift=-2mm]\p A) -- ([yshift=+2mm]\p A);
    }
    \path[set region] (x5A) rectangle ([yshift=-1mm]x2A);

    \foreach \p in {x1,x3} {
        \draw [dash dot] (\p) -- (\p B);
        \draw [thick] ([xshift=-2mm]\p B) -- ([xshift=+2mm]\p B);
    }
    \path[set region] (x3B) rectangle ([xshift=-1mm]x1B);
    \node[set label] at (0,0) {$S$};
    \node[set label] at ([yshift=-6mm]$(ori)!(0,0)!(A)$) {$X$};
    \node[set label] at ([xshift=-6mm]$(ori)!(0,0)!(B)$) {$Y$};

    \draw[thick,decorate,decoration={brace,amplitude=2mm}] ([yshift=-1mm]x2A) -- ([yshift=-1mm]x5A);
    \draw[thick,decorate,decoration={brace,amplitude=2mm}] ([xshift=-1mm]x1B) -- ([xshift=-1mm]x3B);
\end{tikzpicture}
\end{center}

\subsection{Subset Projection}
A prototypical example wherein an adjoint triple 
\[ f_{!}, \exists_{f} \dashv f^{\ast}, f^{-1} \dashv f^{!}, \forall_{f} \]
arises is that of functions $f : X \to Y$ between sets $X$ and $Y$. The inverse image functor $f^{\ast} : \mathscr{P}Y \to \mathscr{P}X$ is defined on a subset $T \subseteq Y$
\[ f^{\ast} ( T ) = \{ x \in X : f(x) \in T \}, \]
and is functorial in the sense that if $T \subseteq T' \subseteq Y$ then $f^{\ast}(T) \subseteq f^{\ast}(T') \subseteq f^{\ast}(T)$. The adjoint functors $\exists_{f}, \forall_{f} : \mathscr{P}X \to \mathscr{P}Y$ are defined on $S \subseteq X$ as
\begin{align*}
    \exists_{f} (S) &= \{ y \in Y : \exists x \in f^{\ast}(y) : x \in S \} \\
    \forall_{f} (S) &= \{ y \in Y : \forall x \in f^{\ast}(y) : x \in S \}
\end{align*}
form an adjoint triple in the sense that $\exists_{f} \dashv f^{\ast} \dashv \forall_{f}$:
\begin{align*}
    \exists_{f} \dashv f^{\ast} : \quad \exists_{f} (S) \subseteq T &\iff S \subseteq f^{\ast}(T) \\
    f^{\ast} \dashv \forall_{f} : \quad f^{\ast}(T) \subseteq R &\iff T \subseteq \forall_{f}(R)
\end{align*}


% \begin{center}
%     \begin{table}
%         \begin{tabular}{|c|c|c|c|c|c|c|}
%             \hline
%             Context & Fibration & Total $\catE$ & Base $\catE$ & Fibers & Covariant Functor & Contravariant Functor \\
%             \hline
%             \hline
%             Subset Projection & & & & & & \\
%             \hline
%             Linear Quantifier Elimination & & & & & & \\
%             \hline
%             Non-linear Quantifier Elimination & & & & & & \\
%             \hline
%             Real-valued Optimization & & & & & & \\
%             \hline
%             General Lattice Optimization & & & & & & \\
%             \hline
%             Convex Projection & & & & & & \\
%             \hline
%             Convex Optimization & & & & & & \\
%             \hline
%             Resolution & & & & & & \\
%             \hline
%             $\ldots$ and more & & & & & & \\
%             \hline
%         \end{tabular}
%     \end{table}
% \end{center}

\begin{center}
\begin{tikzpicture}[
        set region/.style={draw=blue!80, fill=blue!20},
        set label/.style={rounded corners=1mm, inner sep=1mm, fill=white, fill opacity=0.95}
    ]
    \coordinate (ori) at (-3,-3);
    \coordinate (A) at ($(ori)+(+7,0)$);
    \coordinate (B) at ($(ori)+(0,+6)$);

    \coordinate (x1) at ( -90:2);
    \coordinate (x2) at ( +10:2);
    \coordinate (x3) at ( +70:2);
    \coordinate (x4) at (+140:2);
    \coordinate (x5) at (+190:2);
    \foreach \p in {x1,x2,x3,x4,x5} {
        \coordinate (\p A) at ($(ori)!(\p)!(A)$);
        \coordinate (\p B) at ($(ori)!(\p)!(B)$);
    }
    \draw [thick, set region] plot [smooth cycle] coordinates {(x1) (+1,-0.5) (x2) (x3) (x4) (x5)};
    
    \path[set region] (x5A) rectangle ([yshift=-1mm]x2A);
    \path[set region] (x3B) rectangle ([xshift=-1mm]x1B);

    \foreach \p in {x2,x5} {
        \draw [dash dot] (\p) -- (\p A);
        \draw [thick] ([yshift=-2mm]\p A) -- ([yshift=+2mm]\p A);
    }

    \foreach \p in {x1,x3} {
        \draw [dash dot] (\p) -- (\p B);
        \draw [thick] ([xshift=-2mm]\p B) -- ([xshift=+2mm]\p B);
    }
    \node[set label] at (-0.25,+0.25) {$S$};

    \node[set label] at ([yshift=-6mm]$(ori)!(0,0)!(A)$) {$X$};
    \node[set label] at ([xshift=-6mm]$(ori)!(0,0)!(B)$) {$Y$};

    \draw[thick,decorate,decoration={brace,amplitude=2mm}] ([yshift=-1mm]x2A) -- ([yshift=-1mm]x5A);
    \draw[thick,decorate,decoration={brace,amplitude=2mm}] ([xshift=-1mm]x1B) -- ([xshift=-1mm]x3B);

    \draw[thick, ->, shorten <= -0.5cm] (ori) -- (A) node[right]{$A$};
    \draw[thick, ->, shorten <= -0.5cm] (ori) -- (B) node[above]{$B$};
\end{tikzpicture}
\end{center}

Consider a pair of sets $A$ and $B$ and a subset $S \subseteq A \times B$ of their cartesian product.  The projection morphisms associated with $A \times B$ are $p : A\times B \to A$ and $q : A \times B \to B$. The projection of the subset $S$ onto $A$ is then the subset $X \subseteq A$ defined by:
\[ X = \{ a \in A \mid \exists s \in S, p (s) = a \} \]

\begin{equation}
    S \subseteq p^{\ast} ( X ) \Longleftrightarrow \exists_p ( S ) \subseteq X
\end{equation}

\subsection{Optimization of real-valued functions}
\begin{center}
    \includegraphics[]{figures/min_max_multivariate_function/figure.pdf}
\end{center}

\clearpage

\section{Categorical Notions}

The following unordered list of categorical concepts are anticipated to be utilized:
\begin{itemize}
    \item adjunctions
    \item fibered categories
    \item cleavages
    \item puesdo functors (and if cleavages are splitting, functors)
    \item Beck-Chevalley condition
    \item Frobenius reciprocity (and functors of monoidal categories)
\end{itemize}

\subsection{Cartesian Arrows}
\begin{definition}
    Let $P : \catE \to \catB$ be a functor between categories $\catE$ and $\catB$. An arrow $\phi : \alpha \to \beta$ of $\catE$ is \textit{cartesian} with respect to $P$ (sometimes \textit{$P$-cartesian}) if for every arrow $\psi : \gamma \to \beta$ sharing a codomain with $\phi$, and for every arrow $g : P(\gamma) \to P(\alpha)$ in $\catB$ satisfying $g \circ P(\phi) = P(\psi)$, there exists a unique arrow $\theta : \gamma \to \alpha$ in $\catE$ satisfying $\phi \circ \theta = \psi$ and $P(\theta) = g$.
    \begin{equation}
        \begin{tikzcd}[row sep=small]
            \gamma \arrow[rd, dashed, "\exists!\theta"'] \arrow[rrd, bend left, "\forall\psi"] \arrow[dd, mapsto] & & \\
            & \alpha \arrow[r, "\phi"'] & \beta \arrow[dd, mapsto] \\
            P(\gamma) \arrow[rd, "\forall g"'] \arrow[rrd, bend left, "P(\psi)"' near start] & & \\
            & P(\alpha) \arrow[r, "P(\phi)"'] \arrow[from=uu, mapsto, crossing over] & P(\beta)
        \end{tikzcd}
    \end{equation}
\end{definition}

\begin{corollary}
    A cartesian morphism $\phi : \alpha \to \beta$ in $\catE$ with respect to a functor $P : \catE \to \catB$ establishes an isomorphism of categories \cite[Section~2.4.1]{lurie2009higher}\footnote{This formulation is also discussed here: \url{https://ncatlab.org/nlab/show/Cartesian+morphism\#CartInOrdCatReformulation}.}
    \begin{equation}
        \catE / \phi \cong \catE / \beta \times_{\catB / P(\beta)} \catB / P(\phi)
    \end{equation}
    where $\catE / \beta \times_{\catB / P(\beta)} \catB / P(\phi)$ is the pullback of functors.
    \begin{equation}
        \begin{tikzcd}
            \catE / \phi \ar[drr, bend left=20, "P/\phi"] \ar[ddr, bend right=40, "\mathrm{cod}"] \ar[dr, dashed, "\cong", leftrightarrow] & & \\ 
            & \catE / \beta \times_{\catB / P(\beta)} \catB / P(\phi) \ar[r] \ar[d] \ar[dr, phantom, "\lrcorner", very near start, xshift=-2em] & \catB / P(\phi) \ar[d, "\mathrm{cod}"] \\ 
            & \catE / \beta \ar[r, "P/\beta"] & \catB / P(\beta) \\ 
        \end{tikzcd}
    \end{equation}
\end{corollary} 
The pullback category $\catE / \beta \times_{\catB / P(\beta)} \catB / P(\phi)$ has morphisms associated with diagrams of $\catB$ with the following format:
\begin{equation}
    \begin{tikzcd}[row sep=large, column sep=small]
        & P(\gamma) \arrow[d, "P(\chi)"] \arrow[ddl, bend right, "f"'] \arrow[ddr, bend left, "P(\omega)"] & \\
        & P(\delta) \arrow[dl, "g"'] \arrow[dr, "P(\psi)"] & \\
        P(\alpha) \arrow[rr, "P(\phi)"] & & P(\beta)
    \end{tikzcd}
    \label{eq:pullback_category_cartesian}
\end{equation}
Evidently, if $\phi : \alpha \to \beta$ is cartesian, then there exists unique morphisms $\zeta : \gamma \to \alpha$ and $\eta : \delta \to \alpha$ such that $P(\zeta) = f$ and $P(\eta) = g$ and the following diagram of $\catE$ commutes:
\begin{equation}
    \begin{tikzcd}[row sep=large]
        & \gamma \arrow[d, "\chi"] \arrow[ddl, bend right, "\zeta"'] \arrow[ddr, bend left, "\omega"] & \\
        & \delta \arrow[dl, "\eta"'] \arrow[dr, "\psi"] & \\
        \alpha \arrow[rr, "\phi"] & & \beta
    \end{tikzcd}
    \label{eq:cartesian_over_category}
\end{equation}
Intuitively, if $\phi$ is cartesian, then in order to determine the category $\catE/\phi$ over $\phi$, it is sufficient to specify $\catE / \beta \times_{\catB / P(\beta)} \catB / P(\phi)$.

\subsection{Fibrations, Fibered Categories, and Cleavages}
\begin{definition}
    A \textit{fibered category over $\catB$} is a category $\catE$ associated to the domain of a functor, referred to as the \textit{fibration}, $P : \catE \to \catB$ with the property that for every morphism $f : a \to b$ of $\catB$ and object $\beta$ such that $P(\beta) = b$, there exists a cartesian arrow $\phi : \alpha \to \beta$ with $P(\phi) = f$.
\end{definition}
\begin{lemma}
    A fibration $P : \catE \to \catB$ is a faithful functor if and only if its fibers are thin.
\end{lemma}
\begin{proof}
    Recall that if $P : \catE \to \catB$ is a faithful functor, then by definition every pair of parallel arrows $\phi, \psi : \alpha \to \beta$ in $\catE$ satisfies 
    \begin{equation}
        \label{eq:faithfulness}
        P(\phi) = P(\psi) : P(\alpha) \to P(\beta) \implies \phi = \psi.
    \end{equation}

    $\implies$ : Assuming $P : \catE \to \catB$ is faithful functor, consider an arbitrary pair of parallel arrows $\phi, \psi : \alpha \to \beta$ in an arbitrary fiber $\catE_{x}$ over $x$; i.e. $P(\phi) = P(\psi) = \id_{x}$. In such cases, faithfulness of $P$ (Eq.~\ref{eq:faithfulness}) guarantees that $\phi = \psi$ and thus $\catE_{x}$ is a thin category.

    $\impliedby$ : If the fiber $\catE_{x}$ for every object $x$ in $\catB$ is a thin category, then clearly $P : \catE \to \catB$ \textit{must} be faithful when restricted to an individual fiber. The non-trivial case is to consider an arbitrary pair of parallel morphisms $\phi, \psi : \alpha \to \beta$ not belonging to any fibers of $\catE$. Denote $a \coloneqq P(\alpha)$ and $b \coloneqq P(\beta)$ and suppose $f \coloneqq P(\phi) = P(\psi) : a \to b$. Then, because $\catE$ is a fibered category, there exists a cartesian arrow $\zeta : \gamma \to \beta$, such that $P(\zeta) = f$ (note that $a = P(\alpha) = P(\gamma)$ but $\gamma$ is not necessarily equal to $\alpha$). Since $\zeta$ is a cartesian arrow, there exists a unique arrows $\mu, \nu: \alpha \to \gamma$ completing the top edges of the following diagram:
    \begin{equation}
        \begin{tikzcd}
            \alpha \ar[dd, mapsto] \ar[rd, "\psi"', bend right] \ar[rr,dashed,"\mu"] & & \gamma \ar[dd, mapsto] \ar[ld, "\zeta"'] & \alpha \ar[dd, mapsto] \ar[lld, "\phi", bend left=20, crossing over, near start] \ar[l, dashed, "\nu"'] \\
            & \beta  & & \\
            a \ar[rr, equals] \ar[rd, "f"', bend right] & & a \ar[r, equals] \ar[ld, "f"] & a \ar[lld,"f", bend left=20] \\
            & b \ar[from=uu, mapsto, crossing over] & & \\
        \end{tikzcd}
        .
    \end{equation}
    However, $P(\nu) = \id_{a} = P(\mu)$ and therefore $\mu$ and $\nu$ are parallel arrows in the fiber $\catE_{a}$ and therefore $\mu = \nu$ because $\catE_{a}$ is assumed thin. Therefore, $\psi = \zeta \circ \mu = \zeta \circ \nu = \phi$ and thus $P$ is a faithful functor.
\end{proof}

\begin{definition}
    A \textit{cleavage} for a fibration $P : \catE \to \catB$ is an assignment to each morphism $f : a \to b$ of $\catB$ and object $\beta$ in $\catE_b$ (i.e. $P(\beta) = b$), a unique cartesian morphism $\kappa_{f}(B)$ of $\catE$ such that $P(\kappa_{f}(B)) = f$.
\end{definition}
Given a cleavage for a fibration, the cartesianness of morphisms within a cleavage permits one to establish functors between the fibers of the fibration. This concept is visualized in the following figure:
\begin{equation}
    \begin{tikzcd}[
            column sep=2em,
            execute at end picture={
                \fill[blue, opacity=0.1] (-7, -0.75) rectangle (+7, -1.5) node[above left, blue!50!black, opacity=1]{$\catB$};
                \fill[red, opacity=0.1] (-7, +3.25) rectangle (+7, -0.25) node[above left, red!50!black, opacity=1]{$\catE$};
                \fill[green, opacity=0.1] (-1.9, +2.25) rectangle (+1.9, +0.25) node[above left, green!50!black, opacity=1]{$\catE_b$};
                \fill[green, opacity=0.1] (-6.9, +2.25) rectangle (-2.75, +0.25) node[above left, green!50!black, opacity=1]{$\catE_a$};
                \fill[green, opacity=0.1] (+2.75, +2.25) rectangle (+6.9, +0.25) node[above left, green!50!black, opacity=1]{$\catE_c$};
            }
        ]
        f^\ast\alpha 
        \ar[rddd, mapsto, bend right] 
        \ar[rr, "f^\ast(\phi\circ\psi)"', "(f^\ast\phi) \circ (f^\ast\psi)", dashed] 
        \ar[rd, "f^\ast\psi"', dashed] 
        & & 
        f^\ast\beta 
        \ar[lddd, mapsto, bend left] 
        \ar[rrrr, "\kappa_f(\beta)", bend left]
        & &
        \alpha
        \ar[rddd, mapsto, bend right]
        \ar[rr, "\phi\circ \psi"]
        \ar[rd, "\psi"']
        \ar[from=llll, "\kappa_f(\alpha)", bend left, crossing over]
        \ar[from=rrrr, "\kappa_g(\alpha)"', bend right, crossing over]
        & & 
        \beta 
        \ar[lddd, mapsto, bend left] 
        \ar[from=rrrr, "\kappa_g(\beta)"', bend right, crossing over]
        & &
        g^\ast\alpha 
        \ar[rddd, mapsto, bend right] 
        \ar[rr, "g^\ast(\phi\circ\psi)"', "(g^\ast\phi) \circ (g^\ast\psi)", dashed] 
        \ar[rd, "g^\ast\psi"', dashed] 
        & & 
        g^\ast\beta 
        \ar[lddd, mapsto, bend left]
        \\
        & 
        f^\ast\gamma 
        \ar[dd, mapsto] 
        \ar[ru, "f^\ast\phi"', dashed] 
        \ar[rrrr, "\kappa_f(\gamma)", bend right=10, crossing over] 
        & & & & 
        \gamma 
        \ar[ru, "\phi"'] 
        \ar[dd, mapsto] 
        & & & & 
        g^\ast\gamma 
        \ar[dd, mapsto] 
        \ar[ru, "g^\ast\phi"', dashed] 
        \ar[llll, "\kappa_g(\gamma)"', bend left=10, crossing over] 
        & 
        \\
        & & & & & & & & & & 
        \\
        & 
        a 
        \ar[rrrr,"f"] 
        & & & & b & & & & 
        c 
        \ar[llll, "g"'] 
        & 
        \\
    \end{tikzcd}
\end{equation}

\subsection{Pseudo-Functors, Splitting Cleavages}

Pages 47-48 of \cite{vistoli2004notes} explicate the notions of pseudo-functors and their equivalence to fibrations with cleavages. Morover if the cleavage is splitting, the induced pseudo-functor is in fact a functor.

\subsection{Nearby Fibrations: Opfibrations and $\ast$-fibrations}

Given a functor $P : \catE \to \catB$, it can be considered as a fibration in many different ways. For example, if $P^{\opcat} : \catE^{\opcat} \to \catB^{\opcat}$ is a fibration, then $P$ is said to be an \textit{opfibration}.

\section*{Categorical Definitions}

\subsection{Hom-Functors}
For a locally small category $\catC$, the hom-functor of $\catC$ is a functor $\Hom_{\catC} : \catC^{\opcat} \times \catC \to \set$ constructed in the following manner. Given objects $a,b,c,\ldots \in \catC_0$ of $\catC$, the hom-functor $\Hom_{\catC}$ maps a pair of objects $(a,b) \in (\catC^\opcat \times \catC)_0 = \catC_0 \times \catC_0 = \catC_0^2$ into the set\footnote{The collection of morphisms of type $a \to b$ forms a set because $\catC$ is locally small.} of morphisms $\catC_1$ of $\catC$ with source $a$ and target $b$. Therefore, $\Hom_{\catC}(a,b)$ is the set of morphisms in $\catC$ of type $a \to b$. Given morphisms $g^{\opcat} \in \Hom_{\catC^{\opcat}}(a,c)$ and $h \in \Hom_{\catC}(b,d)$, the hom-functor $\Hom_{\catC}$ constructs a function
\[ \Hom_{\catC}(g^{\opcat}, h) : \Hom_{\catC}(a,b) \to \Hom_{\catC}(c,d) \]
which takes a morphism $f : a \to b \in \Hom_{\catC}(a,b)$ and produces the morphism $h \circ f \circ g : c \to d \in \Hom_{\catC}(c,d)$. Graphically,
\[
    \Hom_{\catC}(g^{\opcat}, h)
    \left(
    \begin{tikzpicture}
        \draw (0,0) node(a){$a$};
        \draw (1,0) node(b){$b$};
        \draw[->] (a) to node[above, midway]{$f$} (b);
    \end{tikzpicture}
    \right)
    =
    \begin{tikzpicture}
        \draw (0,0) node(c){$c$};
        \draw (1,0) node(a){$a$};
        \draw (2,0) node(b){$b$};
        \draw (3,0) node(d){$d$};
        \draw[->] (c) to node[above, midway]{$g$} (a);
        \draw[->] (a) to node[above, midway]{$f$} (b);
        \draw[->] (b) to node[above, midway]{$h$} (d);
    \end{tikzpicture}
\]

\subsection{Adjoint Functors}
Given two categories $\mathscr{C}$ and $\mathscr{D}$, a pair of functors $L : \mathscr C \to \mathscr D, R : \mathscr D \to \mathscr C$ are called an \textit{adjoint pair}, denoted $L \dashv R$ or
\[
    \begin{tikzpicture}
        \draw (0,0) node(c){$\catC$};
        \draw (2,0) node(d){$\catD$};
        \draw[->] (c) to[bend left] node[above, midway]{$L$} (d);
        \draw[->] (d) to[bend left] node[below, midway]{$R$} (c);
        \draw (1,0) node[rotate=-90]{$\dashv$};
    \end{tikzpicture}
\]
if there exists a natural isomorphism $\alpha$ between the following pair of hom-functors of type $\mathscr C^{\opcat} \times \mathscr D \to \set$:
\[ \Hom_{\mathscr D}(L^{\opcat}(-), -) \stackrel{\alpha}{\simeq} \Hom_{\mathscr C}(-, R(-)) \]
This relationship can be depicted graphically as $2$-cell (and its inverse) in $\cat$,
\[
    \begin{tikzpicture}
        \draw (0,4) node(tl){$\catC^\opcat \times \catD$};
        \draw (4,4) node(tr){$\catC^\opcat \times \catC$};

        \draw (0,0) node(bl){$\catD^{\opcat} \times \catD$};
        \draw (4,0) node(br){$\set$};
        \draw[->] (tl) to node[midway, above]{$I_{\catC^{\opcat}} \times R$} (tr);
        \draw[->] (bl) to node[midway, above]{$\Hom_{\catD}$} (br);
        \draw[->] (tl) to node[midway, left]{$L^{\opcat} \times I_{\catD}$} (bl);
        \draw[->] (tr) to node[midway, right]{$\Hom_{\catC}$} (br);

        \draw[double equal sign distance, -implies] (1,1.5) to[bend left] node[above left]{$\alpha$} (2.5,3);
        \draw[double equal sign distance, -implies] (3,2.5) to[bend left] node[below right]{$\alpha^{-1}$} (1.5,1);
    \end{tikzpicture}
\]
Concretely, the naturality of $\alpha$ means that for every morphism $(f^{\opcat} : b \to a, g : c \to d) \in (\catC^{\opcat} \times \catD)_1$ the components $\alpha_{(b,c)}$ and $\alpha_{(a,d)}$ of $\alpha$ make the following square commute:
\[
    \begin{tikzpicture}
        \draw (0,2) node(tl){$\Hom_{\catD}(L^{\opcat}(b), c)$};
        \draw (8,2) node(tr){$\Hom_{\catD}(L^{\opcat}(a), d)$};
        \draw[->] (tl) to node[midway, above]{$\Hom_{\catD}(L^{\opcat}(f^{\opcat}), g)$} (tr);

        \draw (0,0) node(bl){$\Hom_{\catC}(b, R(c))$};
        \draw (8,0) node(br){$\Hom_{\catC}(a, R(d))$};
        \draw[->] (bl) to node[midway, above]{$\Hom_{\catC}(f^{\opcat}, R(g))$} (br);

        \draw[->] (tl) to node[midway, left]{$\alpha_{(b,c)}$} (bl);
        \draw[->] (tr) to node[midway, right]{$\alpha_{(a,d)}$} (br);
    \end{tikzpicture}
\]

\subsection{Beck-Chevalley Conditions}

The Beck-Chevalley Conditions are conditions that may or may not be satisfied by a quadruplet of functors $F,H,G,K$ which form a natural isomorphism $\alpha : K F \Rightarrow H G$ square:

\[
    \begin{tikzpicture}
        \draw (-1,+1) node(tl){$\catA$};
        \draw (+1,+1) node(tr){$\catB$};
        \draw (-1,-1) node(bl){$\catC$};
        \draw (+1,-1) node(br){$\catD$};

        \draw[->] (tl) to node[above]{$F$} (tr);
        \draw[->] (tl) to node[left ]{$G$} (bl);
        \draw[->] (bl) to node[below]{$H$} (br);
        \draw[->] (tr) to node[right]{$K$} (br);

        \draw[double equal sign distance, -implies] (+0.5,+0.5) to node[above left]{$\alpha$} (-0.5,-0.5);
    \end{tikzpicture}
\]
To define the \textit{left} Beck-Chevalley condition, one needs functors $F_L : \catB \to \catA$ and $H_L : \catD \to \catA$ which are respectively left adjoint functors to $F$ and $H$, 

\[
    \begin{tikzpicture}
        \draw (-1,+1) node(tl){$\catA$};
        \draw (+1,+1) node(tr){$\catB$};

        \draw[->] (tl) to[bend right] node[below]{$F$} (tr);
        \draw[->] (tr) to[bend right] node[above]{$F_L$} (tl);
        \draw (0,+1) node[rotate=-90]{$\dashv$};
    \end{tikzpicture}
    ,
    \qquad 
    \begin{tikzpicture}
        \draw (-1,-1) node(bl){$\catC$};
        \draw (+1,-1) node(br){$\catD$};

        \draw[->] (bl) to[bend right] node[below]{$H$} (br);
        \draw[->] (br) to[bend right] node[above]{$H_L$} (bl);
        \draw (0,-1) node[rotate=-90]{$\dashv$};
    \end{tikzpicture}
    .
\]
Using these left adjoint functors, it becomes possible to construct a natural transformation $\beta : KH_L \Rightarrow GF_L$ from $\alpha$\footnote{The natural transformations $\alpha$ and $\beta$ are known as \textit{mates} or \textit{conjugates}.}. Graphically, $\beta$ can be identified as the outer cell of the following diagram:
\[
    \begin{tikzpicture}
        \draw (-1.5,+1.5) node(tl){$\catA$};
        \draw (+1.5,+1.5) node(tr){$\catB$};
        \draw (-1.5,-1.5) node(bl){$\catC$};
        \draw (+1.5,-1.5) node(br){$\catD$};

        \draw[->] (tl) to[bend right] node[below]{$F$} (tr);
        \draw[->] (tr) to[bend right] node[above]{$F_L$} (tl);
        \draw (0,+1.5) node[rotate=-90]{$\dashv$};
        \draw[->] (tl) to node[left ]{$G$} (bl);
        \draw[->] (bl) to[bend left ] node[above]{$H$} (br);
        \draw[->] (br) to[bend left ] node[below]{$H_L$} (bl);
        \draw (0,-1.5) node[rotate=+90]{$\dashv$};
        \draw[->] (tr) to node[right]{$K$} (br);

        \draw[double equal sign distance, -implies] (+0.5,+0.5) to node[above left]{$\alpha$} (-0.5,-0.5);
    \end{tikzpicture},
    \qquad
    \text{i.e.}
    \qquad
    \begin{tikzpicture}
        \draw (-1,+1) node(tl){$\catA$};
        \draw (+1,+1) node(tr){$\catB$};
        \draw (-1,-1) node(bl){$\catC$};
        \draw (+1,-1) node(br){$\catD$};

        \draw[->] (tr) to node[above]{$F_L$} (tl);
        \draw[->] (tl) to node[left ]{$G$} (bl);
        \draw[->] (br) to node[below]{$H_L$} (bl);
        \draw[->] (tr) to node[right]{$K$} (br);

        \draw[double equal sign distance, -implies] (+0.5,-0.5) to node[above right]{$\beta$} (-0.5,+0.5);
    \end{tikzpicture}.
\]
Although the natural transformation $\alpha$ is assumed to be a natural isomorphism, the natural transformation $\beta$ need not be; if $\beta$ happens to be a natural isomorphism, then we say that the original square satisfies the \textit{left} Beck-Chevalley condition\footnote{Are the left adjoints $F_L, H_L$ unique? If not, it might be better to say the original square satifies the left Beck-Chevalley condition with respect to $F_L, H_L$.}. The \textit{right} Beck-Chevalley condition is defined analogously with functors $F_R, H_R$ which are respectively right adjoints $F \dashv F_R$ and $H \dashv H_R$.

\subsection{Slice and Coslice Categories}

Given a category $\catC$ and an object $c \in \catC_0$ of $\catC$, the \textit{slice category} (or \textit{over category}) $\catC/c$ is the ``stuff in $\catC$ that is on top of $c$''. Specifically, the objects of $\catC/c$ are all the morphisms $f \in \catC_1$ from $\catC$ whose codomain is $\cod(f) = c$ (alternatively you could write $(\catC/c)_0 = \Hom_{\catC}(-,c)$). A morphism of $\catC/c$ between objects $f : a \to c, g : b \to c \in (\catC/c)_0$ is a commuting triangle completed by a third morphism $h : a \to b \in \catC_1$:

\[
    \begin{tikzpicture}
        \draw (150:1) node(tl){$a$};
        \draw ( 30:1) node(tr){$b$};
        \draw (270:1)node(bm){$c$};

        \draw[->] (tl) to node[below,left ]{$g$} (bm);
        \draw[->] (tr) to node[below,right]{$f$} (bm);

        \draw[->] (tl) to node[above]{$h$} (tr);
    \end{tikzpicture}
\]
Composition of morphisms in $\catC/c$ is induced by the composition of morphisms in $\catC$:
\[
    \left(
    \begin{tikzpicture}
        \draw (150:1) node(tl){$y$};
        \draw ( 30:1) node(tr){$z$};
        \draw (270:1) node(bm){$c$};

        \draw[->] (tl) to node[below,left ]{$f$} (bm);
        \draw[->] (tr) to node[below,right]{$h$} (bm);

        \draw[->] (tl) to node[above]{$n$} (tr);
    \end{tikzpicture}
    \right)
    \circ_{\catC/c}
    \left(
    \begin{tikzpicture}
        \draw (150:1) node(tl){$x$};
        \draw ( 30:1) node(tr){$y$};
        \draw (270:1) node(bm){$c$};

        \draw[->] (tl) to node[below,left ]{$g$} (bm);
        \draw[->] (tr) to node[below,right]{$f$} (bm);

        \draw[->] (tl) to node[above]{$m$} (tr);
    \end{tikzpicture}
    \right)
    =
    \begin{tikzpicture}
        \draw (150:1.5) node(tl){$x$};
        \draw ( 90:0.75) node(tm){$y$};
        \draw ( 30:1.5) node(tr){$z$};
        \draw (270:1.5) node(bm){$c$};

        \draw[->] (tl) to node[below,left ]{$g$} (bm);
        \draw[->] (tm) to node[right]{$f$} (bm);
        \draw[->] (tr) to node[below,right]{$h$} (bm);

        \draw[->] (tl) to node[above]{$m$} (tm);
        \draw[->] (tm) to node[above]{$n$} (tr);
    \end{tikzpicture}
\]

The assignment of an overcategory $\catC/c$ to each object $c$ can be extended to a \textit{slice functor} $\catC / (-) : \catC \to \mathbf{Cat}$ in the following sense. For objects $c \in \catC_0$, the slice functor takes $c$ to the slice category $\catC/c$; for morphisms $f : a \to b \in \catC_1$, the slice functor takes $f$ to the functor $\catC / f : \catC / a \to \catC / b$ defined graphically; for every morphism of $\catC / a$ (commuting triangle in $\catC$ over $a$), contruct the morphism of $\catC / b$ (commuting triangle in $\catC$ over $b$) as follows:
\[
    \begin{tikzpicture}
            \draw (150:1) node(tl){$l$};
            \draw ( 30:1) node(tr){$r$};
            \draw (270:1) node(bm){$a$};
            \draw (270:2.5) node(bb){$b$};

            \draw[->] (tl) to node[below,left ]{$x$}  (bm);
            \draw[->] (tr) to node[below,right]{$x'$} (bm);
            \draw[->] (tl) to[out=-120, in=+160] node[below,left ]{$f \circ_{\catC} x$}  (bb);
            \draw[->] (tr) to[out= -60, in= +20] node[below,right]{$f \circ_{\catC} x'$} (bb);
            \draw[->] (tl) to node[above]{$m$} (tr);
            \draw[->] (bm) to node[right]{$f$} (bb);
    \end{tikzpicture}
\]
where the inner triangle is a morphism of $\catC/a$ and the outer triangle is a morphism of $\catC/b$ given by the functor $\catC/f$.

Given a category $\catC$ and an object $c \in \catC_0$ of $\catC$ the \textit{coslice category} (or \textit{under category}) $c/\catC$ is the ``stuff in $\catC$ that is underneath $c$''. Specifically, the objects of $c/\catC$ are all the morphisms $f \in \catC_1$ from $\catC$ whose domain is $\dom(f) = c$ (alternatively you could write $(c/\catC)_0 = \Hom_{\catC}(c,-)$). A morphism of $c/\catC$ between objects $f : c \to a, g : c \to b \in (c/\catC)_0$ is a commuting triangle completed by a third morphism $h : a \to b \in \catC_1$:

\[
    \begin{tikzpicture}
        \draw (210:1) node(tl){$a$};
        \draw (330:1) node(tr){$b$};
        \draw ( 90:1) node(bm){$c$};

        \draw[<-] (tl) to node[below,left ]{$g$} (bm);
        \draw[<-] (tr) to node[below,right]{$f$} (bm);
        \draw[->] (tl) to node[below]{$h$} (tr);
    \end{tikzpicture}
\]
Everything about coslice categories is defined as expected analogously to that of a slice categories.
\textcolor{red!50!black}{[TODO: determine how the details of the Grothendieck construction transform the slice (pseudo-)functor $\catC / (-) : \catC \to \mathbf{Cat}$ into the codomain fibration.]}
\subsection{Functors of Monoidal Categories}

\textcolor{red!50!black}{[TODO]}

\subsection{Frobenius Reciprocity}

\textcolor{red!50!black}{[TODO]}

\section*{Comments on selected references}
This section is temporary and reserved for recording comments toward various references.
\begin{itemize}
    \item \citeauthor{vistoli2004notes}~\cite{vistoli2004notes}
    \item \citeauthor{street1974fibrations}~\cite{street1974fibrations}
    \item \citeauthor{koudenburg2018categorical}~\cite{koudenburg2018categorical}
    \item \citeauthor{brown2009algebraic}~\cite{brown2009algebraic}
    \item \citeauthor{lurie2009higher}~\cite{lurie2009higher}
    \item \citeauthor{shulman2008framed}~\cite{shulman2008framed}
    \item \citeauthor{boyd2004convex}~\cite{boyd2004convex}
    \item \citeauthor{bogart2013hom}~\cite{bogart2013hom}
    \item \citeauthor{gubeladze2016affine}~\cite{gubeladze2016affine}
    \item \citeauthor{fausk2003isomorphisms}~\cite{fausk2003isomorphisms}
    \item \citeauthor{hofstra2011dialectica}~\cite{hofstra2011dialectica}
    \item \citeauthor{ponto2012duality}~\cite{ponto2012duality}
\end{itemize}

\printbibliography
\end{document}
